<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Testing Raphael</title>
    </head>
    <body>
        <script src="raphael.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
        <script>
            
		$.getJSON( "map_data.json", function( data ) {
			var paper = Raphael(0, 0, 2000, 2000);
			var elementSet = paper.set();
			var attrs = {"type":"path","stroke":"none"};
			var sa = {}

			$.each(data, function(i, province) {
				attrs.fill = province.color;
			    	sa[province.name] = paper.path(province.path).attr(attrs);
  				sa[province.name].name = province.name;
				/**
				st.node.onclick = function () {
				      this.state = 1 - this.state;
				      animate(st);
				      // if the node is deactivated stop now
				      if (!this.state) return;
				      // otherwise deactivate and animate the other nodes
				      for (i in aus) {
					// if node is `this` or node is already deactivated, continue
					if (aus[i].node === this || !aus[i].node.state) continue;
					// otherwise deactivate and animate
					aus[i].node.state = 0;
					animate(aus[i]);
				      }
				    };
				*/	
			});

			
			$.each(sa, function(i, st) {
				st.node.onclick = function() {
					paper.clear();
					//paper = Raphael(-2200, -500, 3000, 2000); Gauteng
					//paper = Raphael(-1400, 100, 3000, 2000); Limpopo
					paper = Raphael(-900, -500, 3000, 2000);
					//paper.canvas.setAttribute('preserveAspectRatio', 'none');
					//paper.setSize('100%', '100%');
					var attrs = {"type":"path","stroke":"none"};
					var sa = {};
					var provinces = paper.set();

					$.getJSON( "freestate.json", function( data ) {
										
						   $.each(data, function(i, munic) {
							attrs.fill = munic.color;
							sa[munic.name] = paper.path(munic.path).attr(attrs);
							provinces.push(sa[munic.name]);
							sa[munic.name].name = munic.name;
							//sa[munic.name].transform("s4.5,4.5 0,0"); Gauteng
							//sa[munic.name].transform("s3,3 0,0"); Limpopo
							sa[munic.name].transform("s3,3 0,0");

						   });

					});

					console.log("Provinces: ", provinces);
					$.each(provinces, function(i, element) {
						consol.log("Element: ", element);
						element.transform("s2");
					});
					//console.log("Provinces: ", provinces);
                    //provinces.transform("s2,2 0,0");
					
				};
			});
	  	 
		});


	    /**
            var real_cape = paper.path().attr(attrs);
	    //elementSet.push(real_cape);
            
            //var western_cape = paper.path("").attr(attrs);
            //elementSet.push(western_cape);

            var free_state = paper.path().attr(attrs);
            //elementSet.push(path);

            var kwaZulu_Natal = paper.path().attr(attrs);
            //elementSet.push(path);

            var limpopo = paper.path().attr(attrs);
        
            var mpumalanga = paper.path().attr(attrs);
            //elementSet.push(path);

            var north_west = paper.path().attr(attrs);
            //elementSet.push(path);
            
            var nothern_cape = paper.path().attr(attrs);
            
            var gauteng = paper.path().attr(attrs);
	    */

        </script>
    </body>
</html>
